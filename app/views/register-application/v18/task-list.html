{% extends "register-application/v18/layout-register-application.html" %}

{% set pageHeading = serviceName %}

{% set hideBackLink = true %}
{% set hideSaveSection = true %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        Register a biodiversity gain site
      </h1>
      
      {% if data['answers-checked'] == 'true' %}
        <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Registration complete</h2>
        <p class="govuk-body app-!-secondary-text-colour govuk-!-margin-bottom-4">You have completed 9 of 9 sections.</p>
      {% else %}
      <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Registration in progress</h2>
        {% if data['landowner-certificate-correct'] and  data['location-confirm'] and data['habitat-checked-data'] and data['legal-agreement-confirm'] and data['management-plan-confirm'] and data['landowner-consent'] and data['local-land-charge-correct']%}
          <p class="govuk-body govuk-!-margin-bottom-4">You have completed 8 of 9 sections.</p>
        {% elif data['landowner-certificate-correct'] and  data['location-confirm'] and data['habitat-checked-data'] and data['management-plan-confirm'] %}
          <p class="govuk-body govuk-!-margin-bottom-4">You have completed 5 of 9 sections.</p>
        {% elif data['landowner-certificate-correct'] and  data['location-confirm'] %}
          <p class="govuk-body govuk-!-margin-bottom-4">You have completed 2 of 9 sections.</p>
        {% else %}
          <p class="govuk-body govuk-!-margin-bottom-4">You have completed 0 of 9 sections.</p>
        {% endif %} 
      {% endif %} 

      <ol class="app-task-list govuk-!-padding-top-3">
        <li>
          <h2 class="app-task-list__section">
            Land information
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['landowner-certificate-correct'] %}
                  <a href="/register-application/{{ pageURL }}/landowner-certificate-check" aria-describedby="landowner-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/landowner-certificate-upload" aria-describedby="landowner-status">
                {% endif %} 
                    Add land ownership details
                  </a>
              </span>
              {% if data['landowner-certificate-correct'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="habitat-information-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="habitat-information-status">Not started</strong>
              {% endif %} 
            </li>

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['location-confirm'] %}
                  <a href="/register-application/{{ pageURL }}/location-confirm" aria-describedby="boundary-status">
                  {% else %}
                  <a href="/register-application/{{ pageURL }}/location-options" aria-describedby="boundary-status">
                {% endif %} 
                  Add biodiversity gain site boundary details
                </a>
              </span>
              {% if data['location-confirm'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="boundary-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="boundary-status">Not started</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            Habitat information
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['habitat-checked-data'] %}
                  <a href="/register-application/{{ pageURL }}/metric-confirm" aria-describedby="habitat-data-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/metric-upload" aria-describedby="habitat-data-status">
                {% endif %} 
                  Add habitat baseline, creation and enhancements
                </a>
              </span>
              {% if data['habitat-checked-data'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="habitat-data-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="habitat-data-status">Not started</strong>
              {% endif %} 
            </li>

            <li class="app-task-list__item">
              {% if data['habitat-checked-data'] %}
                <span class="app-task-list__task-name">
                  {% if data['linked-development'] %}
                    <a href="/register-application/{{ pageURL }}/allocation-confirm" aria-describedby="record-habitat-status">Record habitats used by a development project</a>
                    {% else %}
                    <a href="/register-application/{{ pageURL }}/allocation" aria-describedby="record-habitat-status">Record habitats used by a development project</a>
                  {% endif %} 
                </span>
                {% if data['linked-development'] %}
                  <strong class="govuk-tag app-task-list__tag" id="record-habitat-status">completed</strong>
                {% else %}
                  <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="record-habitat-status">not started</strong>
                {% endif %} 
              {% else %}
                <span class="app-task-list__task-name">
                  Record habitats used by a development project
                </span>
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="submit-application-status">Cannot start yet</strong>
              {% endif %} 
            </li>

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['management-plan-confirm'] %}
                  <a href="/register-application/{{ pageURL }}/management-plan-confirm" aria-describedby="management-plan-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/management-plan-upload" aria-describedby="management-plan-status">
                {% endif %} 
                  Add habitat management and monitoring details
                </a>
              </span>
              {% if data['management-plan-confirm'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="management-plan-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="management-plan-status">Not started</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            Legal information
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['legal-agreement-confirm'] %} 
                  <a href="/register-application/{{ pageURL }}/legal-agreement-confirm" aria-describedby="legal-agreement-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/legal-agreement" aria-describedby="legal-agreement-status">
                {% endif %} 
                  Add legal agreement details
                </a>
              </span>
              {% if data['legal-agreement-confirm'] %} 
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="legal-agreement-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="legal-agreement-status">Not started</strong>
              {% endif %} 
            </li>

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['legal-agreement'] == "Conservation covenant" and data['legal-agreement-confirm'] %}
                  {% if data['local-land-charge-correct'] %} 
                      <a href="/register-application/{{ pageURL }}/local-land-charge-check" aria-describedby="local-land-charge-status">
                    {% else %}
                      <a href="/register-application/{{ pageURL }}/local-land-charge-upload" aria-describedby="local-land-charge-status">
                    {% endif %} 
                      Add local land charge search certificate
                    </a>
                  </span>
                  {% if data['local-land-charge-correct'] %} 
                    <strong class="govuk-tag govuk-tag app-task-list__tag" id="local-land-charge-status">Completed</strong>
                  {% else %}
                    <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="local-land-charge-status">Not started</strong>
                  {% endif %}
              {% else %}
                  Add local land charge search certificate
                </span>
                {% if data['legal-agreement'] != "Conservation covenant" and data['legal-agreement-confirm'] %}
                  <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="local-land-charge-status">not needed</strong>
                {% else %}
                  <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="local-land-charge-status">cannot start yet</strong>
                {% endif %}
              {% endif %}
            </li>

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                <a href="/register-application/{{ pageURL }}/landowner-consent" aria-describedby="landowner-consent-status">
                  Consent to register the biodiversity gain site
                </a>
              </span>
              {% if data['landowner-consent'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="landowner-consent-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="landowner-consent-status">Not started</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            Submit your biodiversity gain site information
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              {% if data['landowner-certificate-correct'] and  data['location-confirm'] and data['habitat-checked-data'] and data['legal-agreement-confirm'] and data['management-plan-confirm'] and data['landowner-consent'] and data['local-land-charge-correct'] or 
                    data['landowner-certificate-correct'] and  data['location-confirm'] and data['habitat-checked-data'] and data['legal-agreement-confirm'] and data['management-plan-confirm'] and data['landowner-consent'] and data['legal-agreement'] != "Conservation covenant" %}
                <span class="app-task-list__task-name">
                  <a href="/register-application/{{ pageURL }}/check-answers" aria-describedby="submit-application-status">
                    Check your answers, pay and submit
                  </a>
                </span>
                {% if data['answers-checked'] == 'true' %}
                  <strong class="govuk-tag app-task-list__tag" id="submit-application-status">completed</strong>
                {% else %}
                  <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="submit-application-status">not started</strong>
                {% endif %} 
              {% else %}
                <span class="app-task-list__task-name">
                  Check your answers, pay and submit
                </span>
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="submit-application-status">Cannot start yet</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

      </ol>

    </div>
  </div>

{% endblock %}
