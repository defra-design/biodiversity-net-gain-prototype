{% extends "register-application/v18/layout-register-application.html" %}

{% set addChangeText = "Add" %}
{% if query.change=="yes" %}
{% set addChangeText = "Update" %}
{% endif %}

{% set pageHeading = addChangeText + " a party listed on the planning obligation (S106 agreement)" %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      
      <!-- action controled in ./_routes.js -->
      <form method="post" >
        <input type="hidden" name="legal-party-type" value="{{data['legal-party-type']}}">


        
        {% call govukFieldset({
          legend: {
            text: pageHeading,
            classes: 'govuk-fieldset__legend--l',
            isPageHeading: true
          }
        }) %}
         <!-- Set the value if this is changing/updating an LP. -->
        {% if query.change == "yes" %}
        {% set fname = data.legalParties[query.id or 0]["legal-party-f-name"] %}
        {% set mname = data.legalParties[query.id or 0]["legal-party-m-name"] %}
        {% set lname = data.legalParties[query.id or 0]["legal-party-l-name"] %}
        {% endif %}
        {{ govukInput({
          name: 'legal-party-f-name',
          hint: 'Or given name',
          value: fname,
          label: {
            html: 'First name'
          }
        }) }}
        {{ govukInput({
          name: 'legal-party-m-name',
          value: mname,
          label: {
            html: 'Middle names'
          }
        }) }}
        {{ govukInput({
          name: 'legal-party-l-name',
          value: lname,
          hint: 'Or family name',
          label: {
            html: 'Last name'
          }
        }) }}

        {% set otherHtml %}
        {{ govukInput({
          id: "legal-party-role-other",
          name: "legal-party-role-other",
          type: "text",
          classes: "govuk-!-width-one-third",
          label: {
            text: "Role"
          }
        }) }}
        {% endset -%}

        <!-- Set the value if this is changing/updating an LP. -->
        {% if query.change == "yes" %}
        {% set radioValue = data.legalParties[query.id or 0]["legal-party-role"] %}
        {% endif %}

        {{ govukRadios({
          name: "legal-party-role",
          value: radioValue,
          fieldset: {
            legend: {
              text: "Role"
            }
          },
          hint: {
            text: "Select one option."
          },
          items: [
            {
              value: "Local authority",
              text: "Local authority"
            },
            {
              value: "Developer",
              text: "Developer"
            },
            {
              value: "Landowner",
              text: "Landowner"
            },
            {
              value: "Other",
              text: "Other",
              conditional: {
                html: otherHtml
              }
            }
          ]
        }) }}
    
        {% endcall %}

        {{ govukButton({
          text: addChangeText +" legal party"
        }) }}
        
      </form>

    </div>
  </div>

{% endblock %}
