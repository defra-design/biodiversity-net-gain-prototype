{% extends "register-application/v9/land/layout-register-application.html" %}

{% set pageHeading = serviceName %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        {{ serviceName }}
      </h1>
      
      {% if data['answers-checked'] %}
        <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Registration complete</h2>
        <p class="govuk-body govuk-!-margin-bottom-4">You have completed 3 of 3 sections.</p>
      {% else %}
      <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Registration incomplete</h2>
        {% if data['development-confirm'] and data['metric-check-data'] == 'yes' and data['legal-agreement-financial-correct'] or data['development-confirm'] and data['metric-check-data'] == 'yes' and data['legal-agreement-planning-obligation-correct']%}
          <p class="govuk-body govuk-!-margin-bottom-4">You have completed 2 of 3 sections.</p>
        {% elif data['location-confirm'] and data['land-ownership-correct'] and data['management-plan-correct']  or data['location-confirm'] and data['land-registry-correct'] and data['management-plan-correct']  %}
          <p class="govuk-body govuk-!-margin-bottom-4">You have completed 1 of 3 sections.</p>
        {% else %}
          <p class="govuk-body govuk-!-margin-bottom-4">You have completed 0 of 6 sections.</p>
        {% endif %} 
      {% endif %} 

      <ol class="app-task-list govuk-!-padding-top-3">

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">1. </span> Land boundary and ownership
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                <a href="/register-application/{{ pageURL }}/location-options" aria-describedby="boundary-status">
                  Land boundary
                </a>
              </span>
              {% if data['location-confirm'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="boundary-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="boundary-status">Not started</strong>
              {% endif %} 
            </li>

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['landowner'] == 'yes' and data['land-registry'] == 'yes' %}
                  <a href="/register-application/{{ pageURL }}/land-registry-search" aria-describedby="habitat-information-status">
                {% elif data['landowner'] == 'yes' and data['land-registry'] == 'no' %}
                  <a href="/register-application/{{ pageURL }}/land-ownership-certificate-upload" aria-describedby="habitat-information-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/landowner-permission-upload" aria-describedby="habitat-information-status">
                {% endif %} 
                    Land ownership
                  </a>
              </span>
              {% if data['land-ownership-correct'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="habitat-information-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="habitat-information-status">Not started</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">2. </span> Habitat information
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['habitat-checked-data'] == 'yes' %}
                  <a href="/register-application/{{ pageURL }}/metric-data-confirm" aria-describedby="habitat-data-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/metric-upload" aria-describedby="habitat-data-status">
                {% endif %} 
                  Biodiversity Metric data
                </a>
              </span>
              {% if data['habitat-checked-data'] == 'yes' %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="habitat-data-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="habitat-data-status">Not started</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">3. </span> Legal information
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['legal-agreement-conservation-correct'] == 'yes' %} 
                  <a href="/register-application/{{ pageURL }}/legal-agreement-conservation-check" aria-describedby="legal-agreement-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/legal-agreement" aria-describedby="legal-agreement-status">
                {% endif %} 
                  Legal agreement
                </a>
              </span>
              {% if data['legal-agreement-conservation-correct'] or data['legal-agreement-no'] %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="legal-agreement-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="legal-agreement-status">Not started</strong>
              {% endif %} 
            </li>

            <li class="app-task-list__item">
              <span class="app-task-list__task-name">
                {% if data['management-plan-correct'] == 'yes' %}
                  <a href="/register-application/{{ pageURL }}/management-plan-check" aria-describedby="management-plan-status">
                {% else %}
                  <a href="/register-application/{{ pageURL }}/management-plan-upload" aria-describedby="management-plan-status">
                {% endif %} 
                  Habitat Management and Monitoring Plan
                </a>
              </span>
              {% if data['management-plan-correct'] == 'yes' %}
                <strong class="govuk-tag govuk-tag app-task-list__tag" id="management-plan-status">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="management-plan-status">Not started</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">4. </span> Check and submit
          </h2>
          <ul class="app-task-list__items">

            <li class="app-task-list__item">
              {% if data['land-ownership-correct'] and  data['location-confirm'] and data['habitat-checked-data'] == 'yes' and data['habitat-checked-data'] == 'yes' and data['legal-agreement-conservation-correct']  or data['land-ownership-correct'] and  data['location-confirm'] and data['habitat-checked-data'] == 'yes' and data['habitat-checked-data'] == 'yes' and data['legal-agreement-no'] %}
                <span class="app-task-list__task-name">
                  <a href="/register-application/{{ pageURL }}/check-answers" aria-describedby="submit-application-status">
                    Check your answers and submit information
                  </a>
                </span>
              {% if data['payment-success'] %}
                <strong class="govuk-tag app-task-list__tag" id="submit-application-status">completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="submit-application-status">not started</strong>
              {% endif %} 
              {% else %}
                <span class="app-task-list__task-name">
                  Check your answers and submit information
                </span>
                <strong class="govuk-tag govuk-tag--grey app-task-list__tag" id="submit-application-status">Cannot start yet</strong>
              {% endif %} 
            </li>

          </ul>
        </li>

      </ol>

    </div>
  </div>

{% endblock %}
